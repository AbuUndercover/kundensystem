{% extends "base.html" %}
{% block inhalt %}
<h2>Kundenverwaltung</h2>

<!-- Filterbereich -->
<form method="GET" action="{{ url_for('kunden') }}" style="margin-bottom: 10px;">
  <fieldset style="border:1px solid #ccc; padding:10px;">
    <legend>Filter</legend>
    <label>Name (Teiltreffer):</label>
    <input type="text" name="name" value="{{ name_q or '' }}" style="width:200px; margin-right:10px;">
    <label>PLZ:</label>
    <input type="text" name="plz" value="{{ plz_q or '' }}" style="width:100px; margin-right:10px;">
    <button type="submit">Anwenden</button>
    <a href="{{ url_for('kunden') }}" style="margin-left:10px;">Filter zurÃ¼cksetzen</a>
  </fieldset>
</form>

{% if erfolg %}
<div class="info-box info-erfolg">
  âœ… {{ erfolg }}
</div>
{% endif %}

{% if meldungen %}
<div class="info-box info-fehler">
  <ul>
  {% for m in meldungen %}
    <li>{{ m }}</li>
  {% endfor %}
  </ul>
</div>
{% endif %}

<!-- Formular: neuen Kunden anlegen -->
<form method="POST" action="{{ url_for('kunden') }}">
  <label>Name:</label><br>
  <input type="text" name="name"><br><br>

  <label>E-Mail:</label><br>
  <input type="text" name="email"><br><br>

  <label>Telefon:</label><br>
  <input type="text" name="telefon"><br><br>

  <label>Adresse:</label><br>
  <input type="text" name="adresse"><br><br>

  <label>PLZ (5-stellig):</label><br>
  <input type="text" name="plz"><br><br>

  <button type="submit">Kunde speichern</button>
</form>

<hr>

<h3>Gespeicherte Kunden</h3>
<table border="1" cellpadding="5" cellspacing="0">
  <tr style="background-color:#ddd;">
    <th>ID</th>
    <th>Name</th>
    <th>E-Mail</th>
    <th>Telefon</th>
    <th>Adresse</th>
    <th>PLZ</th>
    <th>Aktionen</th>
  </tr>
  {% for k in kunden %}
  <tr>
    <td>{{ k.id }}</td>
    <td>{{ k.name }}</td>
    <td>{{ k.email }}</td>
    <td>{{ k.telefon }}</td>
    <td>{{ k.adresse }}</td>
    <td>{{ k.plz }}</td>
    <td>
      <a href="{{ url_for('kunde_bearbeiten', kunde_id=k.id) }}">âœï¸ Bearbeiten</a> |
      <a href="{{ url_for('kunde_loeschen_route', kunde_id=k.id) }}" onclick="return confirm('Wirklich lÃ¶schen?')">ğŸ—‘ï¸ LÃ¶schen</a>
    </td>
  </tr>
  {% endfor %}
</table>
{% endblock %}
